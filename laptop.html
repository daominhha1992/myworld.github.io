<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Laptop Nh·∫≠p Kh·∫©u</title>
<style>
  html, body { height: 100%; margin: 0; }
  body {
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background: #f7f9fc;
    display: flex;
    flex-direction: column;
    color: #222;
  }
  header {
    background: #004aad;
    color: #fff;
    padding: 14px 28px;
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
  }
  header .brand { font-size: 20px; font-weight:700; }
  header input[type="text"] {
    padding: 8px 12px;
    width: 320px;
    border: none;
    border-radius: 6px;
    outline: none;
  }

  .container {
    flex: 1;
    max-width: 1200px;
    margin: 28px auto;
    padding: 0 16px 30px;
  }

  .product-grid {
    display: grid;
    gap: 18px;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  }

  .card {
    background:#fff;
    border-radius:10px;
    box-shadow:0 2px 8px rgba(0,0,0,0.08);
    overflow:hidden;
    display:flex;
    flex-direction:column;
    transition:transform .18s ease;
  }
  .card:hover { transform:translateY(-6px); }
  .thumb {
    width:100%;
    height:180px;
    object-fit:contain;
    background:#fff;
  }
  .card-body { padding:12px 12px 16px; flex:1; display:flex; flex-direction:column; }
  .name { font-weight:700; color:#103a8a; font-size:14px; margin-bottom:6px; min-height:38px; }
  .price { margin-top:auto; display:flex; align-items:center; justify-content:space-between; gap:10px; }
  .price .p { color:#004aad; font-weight:800; font-size:15px; }
  .buy-btn {
    background:#004aad;
    color:#fff;
    padding:8px 10px;
    border-radius:6px;
    text-decoration:none;
    font-weight:600;
    white-space: nowrap;
  }

  footer {
    text-align:center;
    padding:12px 10px;
    background: rgba(22,22,22,0.7);
    color:#fff;
    margin-top:auto;
  }

  .top-right { display:flex; gap:12px; align-items:center; }
  select {
    padding:5px 5px;
    font-size:15px;
    border-radius:6px;
    border:none;
    min-width:100px;
  }
  @media (max-width: 768px) {
    header { flex-wrap: wrap; padding:10px; }
    header .brand { font-size:16px; flex:1 1 100%; margin-bottom:10px; text-align:center; }
    .top-right { flex-wrap:wrap; justify-content:center; gap:8px; width:100%; }
    header input[type="text"] { width:100%; font-size:14px; padding:6px 8px; margin-top:8px; }
  }
</style>
</head>
<body>

<header>
  <div class="brand">Laptop Nh·∫≠p Kh·∫©u - Li√™n h·ªá: 096.136.4508</div>
  <div class="top-right">
    <label style="color:#fff;">H√£ng</label>
    <select id="brandFilter">
      <option value="all">T·∫•t c·∫£</option>
      <option value="Dell">Dell</option>
      <option value="Lenovo">Lenovo</option>
    </select>
    <label style="color:#fff;">S·∫Øp x·∫øp</label>
    <select id="sort">
      <option value="default">M·∫∑c ƒë·ªãnh</option>
      <option value="asc">Gi√° tƒÉng d·∫ßn</option>
      <option value="desc">Gi√° gi·∫£m d·∫ßn</option>
    </select>
    <input type="text" id="search" placeholder="üîç T√¨m theo t√™n ho·∫∑c CPU..." />
  </div>
</header>

<div class="container">
  <div class="product-grid" id="productGrid"></div>
</div>

<footer>¬© 2025 Laptop Nh·∫≠p Kh·∫©u ‚Äî Hotline: 096.136.4508</footer>

<!-- ====== FIREBASE K·∫æT N·ªêI FIRESTORE ====== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
  import { firebaseConfig } from "./js/firebase-config.js";

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const grid = document.getElementById("productGrid");
  const searchInput = document.getElementById("search");
  const brandFilter = document.getElementById("brandFilter");
  const sortSelect = document.getElementById("sort");

  let products = [];

  async function loadProducts() {
    const querySnapshot = await getDocs(collection(db, "products"));
    products = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
    filterAndSort();
  }

  function renderProducts(list) {
    grid.innerHTML = "";
    if (!list.length) {
      grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:20px;background:#fff;border-radius:8px;">Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</div>`;
      return;
    }
    list.forEach(p => {
      const specs = `${p.cpu || ""} / ${p.ram || ""} / ${p.ssd || ""} / ${p.screen || ""}`;
      grid.innerHTML += `
        <div class="card">
          <img class="thumb" src="${p.img || "./noimg.png"}" alt="${p.name}">
          <div class="card-body">
            <div class="name">${p.name || "Kh√¥ng t√™n"}</div>
            <div class="specs">${specs}</div>
            <div class="price">
              <div class="p">${(p.price || 0).toLocaleString("vi-VN")} VNƒê</div>
              <a class="buy-btn" href="https://m.facebook.com/search/posts/?q=${encodeURIComponent(p.name || "")}%20H√†%20H·∫£o%20H√°n" target="_blank">Xem th√™m</a>
            </div>
          </div>
        </div>`;
    });
  }

  function filterAndSort() {
    let res = [...products];
    const q = searchInput.value.trim().toLowerCase();
    const brand = brandFilter.value;
    const sort = sortSelect.value;

    if (brand !== "all") res = res.filter(p => p.brand?.toLowerCase() === brand.toLowerCase());
    if (q) res = res.filter(p => p.name?.toLowerCase().includes(q) || p.cpu?.toLowerCase().includes(q));
    if (sort === "asc") res.sort((a, b) => (a.price || 0) - (b.price || 0));
    if (sort === "desc") res.sort((a, b) => (b.price || 0) - (a.price || 0));

    renderProducts(res);
  }

  searchInput.addEventListener("input", filterAndSort);
  brandFilter.addEventListener("change", filterAndSort);
  sortSelect.addEventListener("change", filterAndSort);

  loadProducts();
</script>

</body>
</html>
